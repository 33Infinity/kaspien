(this.webpackJsonpkaspien=this.webpackJsonpkaspien||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),i=n.n(c),u=n(4),s=n.n(u),o=n(9),l=n(42),p=n(80),f=n(81),h=n(35);function b(e,t,n){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,Object(h.confirmAlert)({title:n,message:r,buttons:[{label:t,onClick:function(){return null}}]});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v,j,O=n(3),x=function(e){var t=e.fileUploadCallBack,r=n(55);function a(){return(a=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(n=t.target)||void 0===n?void 0:n.files[0].size)>1e3&&b("Ok","Error","File is too large to read"),n.files[0].name.endsWith(".csv")){e.next=5;break}return b("Ok","Error","File must be .csv"),e.abrupt("return","");case 5:(r=new FileReader).addEventListener("load",(function(e){var t;return c(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result)}),!1),r.removeEventListener("load",(function(e){var t;return c(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result)}),!0),r.readAsText(n.files[0]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r().fromString(n);case 2:a=e.sent,console.log(a),t(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"file",accept:".csv",onChange:function(e){return a.apply(this,arguments)}}),Object(O.jsx)(p.a,{title:"Select Image",children:Object(O.jsx)("label",{htmlFor:"faceImage",children:Object(O.jsx)(f.a,{color:"primary","aria-label":"upload picture",component:"span"})})})]})},m=(n(59),n(5)),y=n(12),k=n(29),g=n(28),w=function(){function e(t){Object(m.a)(this,e),this.ErrorMessage=void 0,this.ErrorMessage=t}return Object(y.a)(e,null,[{key:"New",value:function(t){return new e(t)}}]),e}(),E=function(){function e(t,n,r,a){Object(m.a)(this,e),this.ASIN=void 0,this.Title=void 0,this.Price=void 0,this.Margin=void 0,this.ASIN=t,this.Title=n,this.Price=r,this.Margin=a}return Object(y.a)(e,null,[{key:"New",value:function(t,n,r,a){return new e(t,n,r,a)}}]),e}(),N=function(){function e(){Object(m.a)(this,e)}return Object(y.a)(e,null,[{key:"nullOrEmpty",value:function(e){return"undefined"==typeof e||!e}}]),e}(),A=function(){function e(){Object(m.a)(this,e)}return Object(y.a)(e,null,[{key:"getJson",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!=n){e.next=7;break}return e.next=4,fetch(t);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,fetch(t,n);case 9:r=e.sent;case 10:return e.next=12,r.json();case 12:return a=e.sent,e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",w.New(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildRequestObject",value:function(e,t){return{method:e,body:JSON.stringify(t)}}}]),e}(),P=function e(){Object(m.a)(this,e)};P.Product=(j=v=function e(){Object(m.a)(this,e)},v.add="http://localhost/kaspien/index.php",v.getAll="http://localhost/kaspien/index.php",j);var M=function e(){Object(m.a)(this,e)};M.get="GET",M.post="POST",M.put="PUT",M.delete="DELETE";var S=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,null,[{key:"add",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P.Product.add,r=this.buildRequestObject(M.post,t),e.next=4,this.getJson(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.Product.getAll,e.next=3,this.getJson(t,null);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(A),T=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,null,[{key:"add",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],0!==t.length){e.next=3;break}return e.abrupt("return",w.New("File contained no data"));case 3:r=0;case 4:if(!(r<t.length)){e.next=12;break}if(!((a=this.buildProduct(t[r]))instanceof w)){e.next=8;break}return e.abrupt("return",a);case 8:n.push(a);case 9:r++,e.next=4;break;case 12:return e.next=14,S.add(n);case 14:if(c=e.sent,!this.isApiError(c)){e.next=17;break}return e.abrupt("return",w.New(c.ErrorMessage));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",[]);case 5:for(n=[],r=0;r<t.length;r++)n.push(E.New(t[r].asin,t[r].title,t[r].price,t[r].margin));return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"buildProduct",value:function(e){var t=this.validate(e);return N.nullOrEmpty(t)?E.New(e.ASIN,e.Title,e.Price,e["Net Margin"]):w.New(t)}},{key:"validate",value:function(e){if(N.nullOrEmpty(e.ASIN))return"ASIN cannot be empty";if(N.nullOrEmpty(e.Title))return"Description cannot be empty";if(N.nullOrEmpty(e.Price))return"Price cannot be empty";if(isNaN(Number(e.Price)))return"".concat(e.Price," is an invalid price");if(N.nullOrEmpty(e["Net Margin"]))return"Margin cannot be empty";var t=e["Net Margin"].slice(0,-1);return N.nullOrEmpty(t)?"Margin cannot be empty":isNaN(Number(t))?"".concat(t," is an invalid margin"):""}}]),n}(function(){function e(){Object(m.a)(this,e)}return Object(y.a)(e,null,[{key:"isApiError",value:function(e){return null!=e&&null!=e.ErrorMessage}}]),e}()),I=n(78),F=n(79),J=function(e){var t=e.product;return Object(O.jsx)("div",{children:Object(O.jsxs)(I.a,{container:!0,spacing:2,direction:"row",children:[Object(O.jsx)(I.a,{item:!0,xs:12,sm:2,children:Object(O.jsx)(F.a,{component:"h5",variant:"h5",children:t.ASIN})}),Object(O.jsx)(I.a,{item:!0,xs:12,sm:8,children:Object(O.jsx)(F.a,{component:"h5",variant:"h5",children:t.Title})}),Object(O.jsx)(I.a,{item:!0,xs:12,sm:1,children:Object(O.jsx)(F.a,{component:"h5",variant:"h5",children:"$".concat(t.Price)})}),Object(O.jsx)(I.a,{item:!0,xs:12,sm:1,children:Object(O.jsx)(F.a,{component:"h5",variant:"h5",children:"".concat(t.Margin,"%")})})]})})},C=function(){Object(r.useEffect)((function(){c()}),[]);var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1];function c(){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAll();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.add(t);case 2:(n=e.sent)instanceof w?b("Ok","Error",n.ErrorMessage):(b("Ok","Success","File Uploaded Successfully!"),c());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{fileUploadCallBack:function(e){return u.apply(this,arguments)}}),n.map((function(e){return Object(O.jsx)(J,{product:e})}))]})};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.7e237af4.chunk.js.map